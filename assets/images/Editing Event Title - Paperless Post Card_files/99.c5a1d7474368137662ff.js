(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[99,141],{TMfV:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return s}));var r=n("JZOQ"),i=n.n(r),a=n("gwGC"),o=function(e,t){switch(!0){case ArrayBuffer.isView(t):return Array.from(t);case i()(t):return Object.keys(t).sort().reduce((function(e,n){return e[n]=t[n],e}),{});default:return t}},c=function(e){var t=JSON.parse(JSON.stringify(e,o)),n=t.children[0].children[0];return delete n.isArtifactDirty,delete n.artifactDuration,delete n.artifactUrl,delete n.compositeUrl,t},l=function(){var e=a.GraphicsManager.getInstance();e.cache.remove(),e.graphics.data.assets.removeAll(),window.__objUrls&&(window.__objUrls.forEach((function(e){return URL.revokeObjectURL(e)})),window.__objUrls.clear())},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return escape(e).split("%20").join(" ").split("%2C").join(", ").split("_").join(" ")}},TfQF:function(e,t,n){"use strict";n.d(t,"a",(function(){return w}));var r,i=n("aNpF"),a=n("X14T"),o=n("ksiN"),c=n("l8pz"),l=n("obW1"),s=n("rAXn"),u=n("EGhD"),d=n("x34t"),f=n("ivGQ"),p=n("PAKT"),h=n("lb5W"),b=n("8ah3"),g=n("Ncpk");var v=Object(h.keyframes)(r||(r=Object(p.a)(["\n  0%, 100% {\n    transform: translateY(0);\n  }\n  50% {\n    transform: translateY(30px);\n  }\n"]))),m=Object(d.a)("div",{target:"eni8o6t1"})({name:"phbyao",styles:"background:rgba(238, 238, 238, 0.9);height:100%;position:absolute;transition:all 1s ease-out;width:100%;pointer-events:none"}),O=Object(d.a)("div",{target:"eni8o6t0"})("animation:",v," 2s infinite;color:",b.l.BLUE500,";text-align:center;font-family:'Courier New',Courier,monospace;pointer-events:none;top:50%;transform:translateY(-50%);position:relative;&:after{font-size:120px;content:'^';}");function y(){return Object(g.b)(m,{children:Object(g.b)(O,{})})}function j(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(s.a)(e);if(t){var i=Object(s.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(l.a)(this,n)}}var E=Object(d.a)("div",{target:"e1rek9qu0"})({name:"t2qaht",styles:"flex:1;display:flex;flex-direction:column;justify-content:center;align-items:center;position:absolute;height:100%;width:100%"});E.displayName="FileDropperContainer";var w=function(e){Object(c.a)(n,e);var t=j(n);function n(){var e;Object(i.a)(this,n);for(var r=arguments.length,a=new Array(r),c=0;c<r;c++)a[c]=arguments[c];return e=t.call.apply(t,[this].concat(a)),Object(u.a)(Object(o.a)(e),"state",{dragging:!1}),Object(u.a)(Object(o.a)(e),"handleDragging",(function(){e.state.dragging||e.setState({dragging:!0})})),Object(u.a)(Object(o.a)(e),"handleDrop",(function(t){var n=e.props.handleFileChange;e.setState({dragging:!1}),n(t)})),Object(u.a)(Object(o.a)(e),"handleLeave",(function(){e.state.dragging&&e.setState({dragging:!1})})),e}return Object(a.a)(n,[{key:"cancelEvent",value:function(e){e.preventDefault(),e.stopPropagation()}},{key:"componentDidMount",value:function(){var e=this;window.addEventListener("drop",(function(t){e.cancelEvent(t)})),window.addEventListener("dragover",(function(t){e.cancelEvent(t)})),window.addEventListener("dragleave",(function(t){e.cancelEvent(t)})),this.containerElement&&(this.containerElement.addEventListener("dragover",this.handleDragging),this.containerElement.addEventListener("drop",this.handleDrop),this.containerElement.addEventListener("dragleave",this.handleLeave))}},{key:"componentWillUnmount",value:function(){var e=this;window.removeEventListener("drop",(function(t){e.cancelEvent(t)})),window.removeEventListener("dragover",(function(t){e.cancelEvent(t)})),window.removeEventListener("dragleave",(function(t){e.cancelEvent(t)}))}},{key:"render",value:function(){var e=this,t=this.state.dragging,n=this.props.children;return Object(g.c)(E,{ref:function(t){e.containerElement=t},children:[t?Object(g.b)(y,{}):null,n]})}}]),n}(f.Component)},VGML:function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return s}));var r=n("kdYO"),i=n("DgoM"),a=n("6mn0"),o=n("sgNE"),c=n("dTrz");function l(e){var t=null===e||void 0===e?void 0:e.children,n=t?Object(a.q)(e):Object(o.a)(e),l=t?e:Object(o.c)(e,c.h).data,s=Object(r.findNodes)(l,"photo","type");return{isBackgroundUgc:n&&n.resourceId===i.d,isPhotoPaperUgc:!!s.some((function(e){return e.resourceId===i.d}))}}function s(e){return Object(r.findNodes)(e,"photo","type").filter((function(e){return e.resourceId!==i.d}))}},XP56:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var r,i,a=n("EGhD");!function(e){e.FEATURE_TEST_CREDIT_CARD="feature.checkout.test.credit.card",e.DEBUG_CACHE="debugGraphicsCache",e.FEATURE_TOGGLES_PANEL="feature.toggles.panel",e.FEATURE_IOS_WEBVIEW="feature.ios.webview",e.FEATURE_REDELIVERY="feature.redelivery.options",e.FEATURE_LINKED_GUESTS="feature.linked.guests"}(i||(i={}));var o=(r={testcc:{toggleProp:i.FEATURE_TEST_CREDIT_CARD,value:!1,description:"Uses Stripe's test API key"}},Object(a.a)(r,i.DEBUG_CACHE,{toggleProp:i.DEBUG_CACHE,value:!1,description:"Render debugging information about the graphics/media cache"}),Object(a.a)(r,"FEATURES_PANEL",{toggleProp:i.FEATURE_TOGGLES_PANEL,value:!1,description:"display a feature toggle panel"}),Object(a.a)(r,"MOBILE_WEBVIEW",{toggleProp:i.FEATURE_IOS_WEBVIEW,value:!1,description:"remove header to allow for easy embedding of webview in ios"}),Object(a.a)(r,"PFR-948",{toggleProp:i.FEATURE_IOS_WEBVIEW,value:!1,description:"remove header to allow for easy embedding of webview in ios"}),Object(a.a)(r,"REDELIVERY",{toggleProp:i.FEATURE_REDELIVERY,value:!0,description:"display redelivery options"}),Object(a.a)(r,"LINKED_GUESTS",{toggleProp:i.FEATURE_LINKED_GUESTS,value:!1,description:"display linked guests"}),r);t.b=o},aK0s:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var r=n("aNpF"),i=n("X14T"),a=n("ksiN"),o=n("l8pz"),c=n("obW1"),l=n("rAXn"),s=n("EGhD"),u=n("x34t"),d=n("ivGQ"),f=n("XbXC"),p=n("Ncpk");function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var b=Object(u.a)("div",{target:"e1ieytb70"})("z-index:100000;text-align:",(function(e){return e.center?"center":"inherit"}),";.fileinput__label{align-items:center;display:flex;font-size:16px;font-weight:400;justify-content:center;padding:1rem;position:relative;}:hover{cursor:pointer;}.fileinput__text{color:rgb(0, 90, 200);position:relative;}.fileinput__icon{margin-right:8px;}.fileinput__input{height:100%;width:100%;opacity:0;overflow:hidden;position:absolute;z-index:-1;}"),g=function(e){Object(o.a)(n,e);var t=h(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),Object(s.a)(Object(a.a)(e),"focusInput",(function(t){e.props.autoFocus&&t&&(t.focus(),t.click())})),e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props,t=e.center,n=e.children,r=e.id,i=e.onChange;return Object(p.b)(b,{center:!!t,children:Object(p.c)("label",{className:"fileinput__label",htmlFor:r,children:[Object(p.b)(f.a,{className:"fileinput__icon"}),Object(p.b)("span",{className:"fileinput__text",children:n}),Object(p.b)("input",{className:"fileinput__input",id:r,onChange:i,ref:this.focusInput,type:"file"})]})})}}]),n}(d.Component)},ebAd:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("aNpF"),i=n("X14T"),a=n("ksiN"),o=n("l8pz"),c=n("obW1"),l=n("rAXn"),s=n("EGhD"),u=n("x34t"),d=n("ivGQ"),f=n("Ncpk");function p(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(l.a)(e);if(t){var i=Object(l.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var h=Object(u.a)("div",{target:"ebg8zyg0"})("width:150px;height:75px;background-color:",(function(e){return e.background}),";color:",(function(e){return e.foreground}),";position:absolute;top:0;left:0;padding:10px;",(function(e){return e.theme.paragraphSmall}),";"),b=function(e){Object(o.a)(n,e);var t=p(n);function n(){var e;Object(r.a)(this,n);for(var i=arguments.length,o=new Array(i),c=0;c<i;c++)o[c]=arguments[c];return e=t.call.apply(t,[this].concat(o)),Object(s.a)(Object(a.a)(e),"componentDidMount",(function(){e.forceUpdateId=setInterval(e.forceRerender,250)})),Object(s.a)(Object(a.a)(e),"componentWillUnmount",(function(){clearInterval(e.forceUpdateId)})),Object(s.a)(Object(a.a)(e),"forceRerender",(function(){e.forceUpdate()})),Object(s.a)(Object(a.a)(e),"renderShouldCache",(function(){var t=e.props,n=t.graphicsManager.graphics,r=t.graphicsManager,i=[];return n.fps>=10||i.push("FPS too low"),r.readyForCache||i.push("Graphics rendering"),r.logicManager.backgroundEditMode&&i.push("Background edit mode (mobile)"),i.length?i.map((function(e,t){return Object(f.b)("p",{children:e},t)})):Object(f.b)("p",{children:"Caching soon."})})),e}return Object(i.a)(n,[{key:"render",value:function(){var e=this.props.graphicsManager;return e.cache.isFinished()?Object(f.c)(h,{background:"green",foreground:"white",children:[Object(f.b)("p",{children:"Cache complete... "}),Object(f.c)("p",{children:[e.cache.length," of ",e.graphics.frameCount," frames"]})]}):e.cache.length>0?Object(f.c)(h,{background:"yellow",foreground:"black",children:[Object(f.b)("p",{children:"Building cache... "}),Object(f.c)("p",{children:[e.cache.length," of ",e.graphics.frameCount," frames"]})]}):Object(f.c)(h,{background:"red",foreground:"white",children:[Object(f.b)("p",{children:"Unable to cache"}),Object(f.b)("div",{children:this.renderShouldCache()})]})}}]),n}(d.Component)},jm2j:function(e,t){(function(t){e.exports=function(){var e={931:function(e){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}}},n={};function r(t){if(n[t])return n[t].exports;var i=n[t]={exports:{}},a=!0;try{e[t](i,i.exports,r),a=!1}finally{a&&delete n[t]}return i.exports}return r.ab=t+"/",r(931)}()}).call(this,"/")},o09x:function(e,t,n){"use strict";n.d(t,"a",(function(){return W}));var r,i,a,o,c,l=n("aNpF"),s=n("X14T"),u=n("ksiN"),d=n("l8pz"),f=n("obW1"),p=n("rAXn"),h=n("EGhD"),b=n("PAKT"),g=n("x34t"),v=n("ivGQ"),m=n.n(v),O=n("lb5W"),y=n("8ah3"),j=n("Ncpk");function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(p.a)(e);if(t){var i=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var w,x="125%",S="1.6s",k="100vw",A=Object(O.keyframes)(r||(r=Object(b.a)(["\n  0% {\n    opacity: 1;\n    transform: rotate(0deg);\n  }\n  80% {\n    opacity: 1;\n    transform: rotate(60deg);\n  }\n  95% {\n    opacity: 1;\n    transform: rotate(0deg) scale(1);\n  }\n  100% {\n    opacity: 0;\n    transform: rotate(0deg) scale(.4);\n  }\n"]))),C=Object(O.keyframes)(i||(i=Object(b.a)(["\n  0% {opacity: 0}\n  15% {opacity: 0}\n  25% {opacity: 1}\n  90% {opacity: 1}\n  100% {opacity: 0}\n"]))),R=Object(O.keyframes)(a||(a=Object(b.a)(["\n  0% {opacity: 0;}\n  15% {opacity: 1}\n  90% {opacity: 1;}\n  100% {opacity: 0;}\n"]))),M=Object(O.keyframes)(o||(o=Object(b.a)(["\n  0% {\n    filter: blur(1px);\n    opacity: 1;\n    transform: translate(0, 0) scale(.4);\n  }\n  10% {\n    filter: blur(0px);\n    opacity: 1;\n    transform: translate(0, 0) scale(1);\n  }\n  30% {\n    filter: blur(2px);\n    opacity: 1;\n    transform: translate(-",", 0) scale(1);\n  }\n  40% {\n    filter: blur(0px);\n    opacity: 1;\n    transform: translate(-",", 0) scale(1);\n  }\n  60% {\n    filter: blur(2px);\n    opacity: 1;\n    transform: translate(0, 0) scale(1);\n  }\n  70% {\n    filter: blur(0px);\n    opacity: 1;\n    transform: translate(0, 0) scale(1);\n  }\n  90% {\n    filter: blur(2px);\n    opacity: 1;\n    transform: translate(-",", 0) scale(1);\n  }\n  100% {\n    filter: blur(0);\n    opacity: 1;\n    transform: translate(-",", 0) scale(1);\n  }\n"])),x,x,x,x),P=Object(O.keyframes)(c||(c=Object(b.a)(["\n  0% {\n    filter: blur(0px);\n    opacity: 1;\n    transform: translate(0, 0) scale(.4);\n  }\n  10% {\n    filter: blur(0px);\n    opacity: 1;\n    transform: translate(0, 0) scale(1);\n  }\n  30% {\n    filter: blur(2px);\n    opacity: 1;\n    transform: translate(",", 0) scale(1);\n  }\n  40% {\n    filter: blur(0px);\n    opacity: 1;\n    transform: translate(",", 0) scale(1);\n  }\n  60% {\n    filter: blur(2px);\n    opacity: 1;\n    transform: translate(0, 0) scale(1);\n  }\n  70% {\n    filter: blur(0px);\n    opacity: 1;\n    transform: translate(0, 0) scale(1);\n  }\n  90% {\n    filter: blur(2px);\n    opacity: 1;\n    transform: translate(",", 0) scale(1);\n  }\n  100% {\n    filter: blur(0px);\n    opacity: 1;\n    transform: translate(",", 0) scale(1);\n  }\n"])),x,x,x,x),T=Object(g.a)("div",{target:"e1rsmz4n8"})("align-items:center;display:flex;height:",k,";justify-content:center;width:",k,";"),L=Object(g.a)("div",{target:"e1rsmz4n7"})("align-items:center;animation:",A," ",S," ease-in-out calc(",S," + 0.3s) forwards;display:flex;height:100%;justify-content:center;position:absolute;width:100%;"),D=Object(g.a)("div",{target:"e1rsmz4n6"})("align-items:center;display:flex;height:",k,";justify-content:center;transform:rotate(-45deg);width:",k,";"),_=Object(g.a)("span",{target:"e1rsmz4n5"})("display:block;animation:",M," ",S," ease-in-out forwards;height:56px;width:56px;"),I=Object(g.a)("span",{target:"e1rsmz4n4"})("display:block;animation:",P," ",S," ease-in-out forwards;height:56px;width:56px;"),U=Object(g.a)("span",{target:"e1rsmz4n3"})("background-color:",y.l.GRAY100,";border-radius:50%;box-shadow:0 0 4px 2px ",y.l.GRAY200,";display:block;height:56px;opacity:0.6;width:56px;"),F=Object(g.a)("div",{target:"e1rsmz4n2"})({name:"1p3pjk5",styles:"align-items:center;display:flex;justify-content:center;line-height:1;margin:0"}),G=Object(g.a)("p",{target:"e1rsmz4n1"})("animation:",C," ",S," ease-in-out forwards;border-radius:4px;background-color:",y.l.BLACK,";color:",y.l.GRAY100,";display:flex;opacity:0;padding:8px 12px;position:absolute;"),B=Object(g.a)("p",{target:"e1rsmz4n0"})("animation:",R," ",S," ease-in-out ",S," forwards;border-radius:4px;background-color:",y.l.BLACK,";color:",y.l.GRAY100,";display:flex;opacity:0;padding:8px 12px;position:absolute;"),N=function(e){Object(d.a)(n,e);var t=E(n);function n(e){var r;return Object(l.a)(this,n),(r=t.call(this,e)).animationRef=m.a.createRef(),r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.animationRef.current.addEventListener("animationend",(function(){setTimeout((function(){e.props.handleRemoveAnimation()}),500)}))}},{key:"render",value:function(){return Object(j.c)(T,{children:[Object(j.b)(L,{children:Object(j.c)(D,{children:[Object(j.b)(_,{children:Object(j.b)(U,{})}),Object(j.b)(I,{children:Object(j.b)(U,{})})]})}),Object(j.c)(F,{children:[Object(j.b)(G,{children:"Pinch zoom"}),Object(j.b)(B,{ref:this.animationRef,children:"Rotate"})]})]})}}]),n}(v.Component);function H(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(p.a)(e);if(t){var i=Object(p.a)(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return Object(f.a)(this,n)}}var z=Object(O.keyframes)(w||(w=Object(b.a)(["\n  0% {\n    height: 0;\n    opacity: 0;\n    transform: translate(0,0);\n    width: 0;\n  }\n  1% {\n    height: 100vw;\n    opacity: 1;\n    transform: translate(0,0);\n    width: 100vw;\n  }\n  99% {\n    height: 100vw;\n    opacity: 1;\n    transform: translate(0,0);\n    width: 100vw;\n  }\n  100% {\n    height: 0;\n    opacity: 0;\n    transform: translate(-999px,-999px);\n    width: 0;\n    display: none;\n  }\n"]))),V=Object(g.a)("div",{target:"e44fpwx0"})("animation:",z," 4s ",(function(e){return e.theme.EASE.OutCirc})," both;position:fixed;z-index:",(function(e){return e.theme.Z_IND.L10}),";display:",(function(e){return e.touchInteracted?"none":"block"}),";"),W=function(e){Object(d.a)(n,e);var t=H(n);function n(){var e;Object(l.a)(this,n);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return e=t.call.apply(t,[this].concat(i)),Object(h.a)(Object(u.a)(e),"state",{touchInteracted:!1}),Object(h.a)(Object(u.a)(e),"handleTouchState",(function(){e.setState({touchInteracted:!0}),e.props.handleRemoveAnimation()})),e}return Object(s.a)(n,[{key:"render",value:function(){return Object(j.b)(V,{onClick:this.handleTouchState,touchInteracted:this.state.touchInteracted,children:Object(j.b)(N,{handleRemoveAnimation:this.props.handleRemoveAnimation})})}}]),n}(v.Component)},priH:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return s}));var r=n("aNpF"),i=n("X14T"),a=n("0a61"),o=n("IPDM"),c=n("tLG4"),l=26214400,s=function(){function e(t,n,i,a){Object(r.a)(this,e),this.file=t,this.onFail=n,this.options=i,this.maxDuration=a||5e3}return Object(i.a)(e,[{key:"isValid",value:function(){var e=this,t=a.a[this.file.type];if(!t){var n="Uh-oh! Please select a different file type. The file you uploaded is not supported.";return this.onFail(n),Promise.reject(new Error(n))}if(this.file.size>l){var r=this.file.size,i=this.file.size-l,s="Uh-oh! Your ".concat(t.isVideo?"video":this.file.type," is too large. Our file size limit is ").concat(Object(c.a)(l));return this.onFail(s,r,i),Promise.reject(new Error(s))}if(this.options){var u=this.options,d=u.rejectPdf,f=u.staticOnly,p=u.videoOnly;if(f&&(t.isVideo||t.isAnimated)){var h="Uh-oh! Please select a different file type. Videos and animated files are not supported for photos.";return this.onFail(h),Promise.reject(new Error(h))}if(d&&"application/pdf"===this.file.type){var b="Uh-oh! Please select a different file type. PDF files are not supported for photos.";return this.onFail(b),Promise.reject(new Error(b))}if(p&&!t.isVideo){var g="Uh-oh! Please select a different file type. MP4, MOV and WebM files are supported.";return this.onFail(g),Promise.reject(new Error(g))}}return new Promise((function(n,r){var i;if(t.webImage&&(i=o.a),t.isVideo&&(i=o.c),!i)return n();i(e.file).then((function(t){if(t.hasWebSupport&&(!t.width||!t.height)){var i="Uh-oh! We are unable to get the dimensions from this ".concat(e.file.type);return e.onFail(i),r(new Error(i))}if(t.duration&&t.duration>e.maxDuration){var a="Uh-oh! Your video is too long. Our duration limit is ".concat(.001*e.maxDuration," seconds");return e.onFail(a),r(new Error(a))}if("image/gif"!==e.file.type)return n();Object(o.e)(e.file).then((function(t){if(t.duration>e.maxDuration){return r(new Error("Uh-oh! Your GIFs is too long. Our duration limit is 5 seconds"))}return n()})).catch((function(t){return e.onFail(t),r(t)}))})).catch((function(e){return r(e)}))}))}}]),e}()},q3Y0:function(e,t,n){"use strict";n.r(t),function(e){var r=n("ivGQ"),i=n("CoHH"),a=n("0evK"),o=n("gwGC"),c=n("VGML"),l=n("DgoM"),s=n("HGwu"),u=n("u/qs"),d=n("TfQF"),f=n("4mNh"),p=n("aK0s"),h=n("NSKe"),b=n("o09x"),g=n("dvmF"),v=n("Apm0"),m=n("A+qt"),O=n("XP56"),y=n("ebAd"),j=n("r/L4"),E=n("KUsB"),w=n("iEGV"),x=n("6mn0"),S=n("oSSu"),k=n("BzOh"),A=n("5MZH"),C=n("+ifg"),R=n("TMfV"),M=n("priH"),P=n("Qenz"),T=n("Ncpk"),L=["INPUT","TEXTAREA"];e&&e.hot&&e.hot.dispose((function(){o.GraphicsManager.instance&&(o.GraphicsManager.getInstance().stop(),o.GraphicsManager.instance=null)}));var D=!1,_={},I={batchUpdateLayers:l.X,copyStyles:l.cb,setActiveCardScenario:l.Bb,setEditorActionNotification:u.m,setEditorState:s.d,setGraphicsSynced:l.Nb,setHasCompletedSetup:l.Ob,setHasEditedMedia:l.Pb,setShowScrollAnimation:u.y,trackCanvasInteraction:f.zb};t.default=Object(a.withRouter)(Object(i.c)((function(e,t){var n=t.router,r=e.editorStates,i=r.editorState,a=r.isCard,o=r.menu,l=r.stage,s=e.editorUI,u=s.actionNotificationSettings.message,d=s.activePreview,f=s.adminEditorPage,p=s.breakpoints,h=s.browserMeta.isAndroid,b=s.editorMode,g=s.editorModePreview,v=s.isDesignYourOwn,m=s.scrollAnimationSettings,y=s.showTextFormatTools,j=e.featureToggles.toggles[O.a.DEBUG_CACHE],S=e.mediaEditor,A=S.currentLayerID,C=S.currentLayerType,R=S.graphicsData,M=S.hasEditedMedia,P=S.inBackgroundEditMode,T=e.page.page,L=e.user.isAdmin,D=Object(x.q)(R),_=Object(w.a)(p),I=Object(c.a)(R).isBackgroundUgc;return{activePreview:d,canEditMasks:"compositions"===f,canEditVisibility:"compositions"===f,currentLayerID:A||D&&D.id,debugCache:j,designYourOwnCTA:n.query.cta||"Upload image, video, or GIF",editorMode:b,editorModePreview:g,forceMinHeight:a&&h,graphicsData:R,hasEditedMedia:M,isAdmin:L,inBackgroundEditMode:P,isBackgroundUgc:I,isCard:a,isDesignYourOwn:v,isInitialCardMedia:Object(k.b)(e),isMobile:_,isMobileBaseMediaEditState:_&&E.Cb.includes(o),isMobileCardTextEditing:a&&_&&[E.Vb,E.Wb,E.Ob,E.ub].includes(i),isMobileMoreView:i===E.Vb,mediaToolsActive:Object(k.a)(e,{checkInitialCardMedia:!1}),pageLayout:T.layout,isPasswordPreview:T.isPasswordPreview,pageStyleToolsActive:E.fc.includes(i),currentAlertMessage:u,pauseGraphics:"rsvp"===n.query.action||"replyToHost"===n.query.action,scrollAnimationCancelled:m.isCancelled,showTextFormatTools:"text"===C&&y,stage:l}}),I)((function(e){var t,n=e.activePreview,i=e.batchUpdateLayers,a=e.blockData,c=e.blockId,l=e.canEditMasks,s=e.canEditVisibility,u=e.copyStyles,f=e.currentAlertMessage,O=e.currentLayerID,w=e.debugCache,x=e.designYourOwnCTA,k=e.editorMode,I=e.editorModePreview,U=e.forceMinHeight,F=e.graphicsData,G=e.hasEditedMedia,B=e.inBackgroundEditMode,N=e.isAdmin,H=e.isBackgroundUgc,z=e.isCard,V=e.isDesignYourOwn,W=e.isMobile,Y=e.isMobileBaseMediaEditState,X=e.isMobileCardTextEditing,q=e.isMobileMoreView,K=e.isPasswordPreview,Q=e.mediaToolsActive,J=e.pageLayout,Z=e.pageStyleToolsActive,$=e.pauseGraphics,ee=e.scrollAnimationCancelled,te=e.setActiveCardScenario,ne=e.setBlockState,re=e.setEditorActionNotification,ie=e.setEditorState,ae=e.setGraphicsSynced,oe=e.setHasCompletedSetup,ce=e.setHasEditedMedia,le=e.setShowScrollAnimation,se=e.showTextFormatTools,ue=e.stage,de=e.toolsetHeight,fe=e.trackCanvasInteraction,pe=Object(r.useRef)(),he=Object(r.useState)(null),be=he[0],ge=he[1],ve=Object(r.useState)(!1),me=ve[0],Oe=ve[1],ye=Object(r.useState)(!1),je=ye[0],Ee=ye[1],we=Object(r.useState)(null),xe=we[0],Se=we[1],ke=Object(r.useState)(!1),Ae=ke[0],Ce=ke[1],Re=Object(r.useState)(!1),Me=Re[0],Pe=Re[1],Te=Object(r.useRef)(!1),Le=Object(r.useState)(null),De=Le[0],_e=Le[1],Ie=Object(r.useState)(!1),Ue=Ie[0],Fe=Ie[1],Ge=Object(r.useState)(""),Be=Ge[0],Ne=Ge[1],He=Object(r.useContext)(g.b).ignoreToolHints,ze=Object(r.useMemo)((function(){return Object(R.b)(F)}),[F]),Ve=Object(r.useMemo)((function(){return JSON.stringify(ze)}),[ze]),We=De!==Ve,Ye=o.GraphicsManager.getInstance(),Xe=Ye.graphics,qe=Xe.selection,Ke=null===qe||void 0===qe||null===(t=qe.currentSelection)||void 0===t?void 0:t.id,Qe=B!==Ye.getBackgroundOnlyMode(),Je=O!==Ke,Ze=k&&W&&!Q||Z||Y;_={mediaBackgroundHandler:Object(C.a)("mediaBackgroundHandler"),deleteLayerHandler:Object(C.a)("deleteLayerHandler"),draggedLayerHandler:Object(C.a)("draggedLayerHandler"),selectLayerHandler:Object(C.a)("selectLayerHandler"),updateLayerHandler:Object(C.a)("updateLayerHandler"),flipScenario:Object(C.a)("flipScenario"),fileChangeHandler:Object(C.a)("fileChangeHandler",{props:[M.default]}),handleScrollAnimation:function(e){e.isActive&&ee||!z||k||K||le(e)}},Object(r.useEffect)((function(){if(pe.current)return Ae?Me&&function(){k&&!Q&&(Ye.clearSelection(),W&&ot());k&&W&&Q&&ot();!G&&We&&Te.current&&ce(!0);We||Qe?(_e(Ve),Ye.update({graphicsData:ze,inBackgroundEditMode:B&&W,hasBackgroundEditModeChanged:Qe,currentLayerID:O,editorMode:k,shouldClearSelection:Ze,hasGraphicsDataChanged:We,shouldPause:$,shouldPlay:!$,element:pe.current},(function(){ne({processing:!1}),W&&B&&!me&&!je&&Oe(!0),ae(Date.now()),function(){var e,t,n,r=qe.currentSelection,i=r&&"envelopeFrontBaseText"!==r.name,a="text"===(null===r||void 0===r?void 0:r.type)&&i&&(null===r||void 0===r||null===(e=r.display)||void 0===e||null===(t=e.field)||void 0===t||null===(n=t.layoutObject)||void 0===n?void 0:n.overflow),o="Drag the bottom of the text box to show hidden text";a?re({type:A.a.ALERT,message:o}):f===o&&re({})}()}))):Je&&Ye.setSelection(O);z&&(W||e.isInitialCardMedia===xe||Se(e.isInitialCardMedia),ot());Te.current=!0}():function(){var e;window.addEventListener("beforeunload",R.c,{capture:!0});var t=J.type===j.c,n=I?null:ue,r=null===(e=pe.current)||void 0===e?void 0:e.parentElement;U&&r&&(r.style.minHeight="".concat(r.offsetHeight,"px"));Ye.batchUpdate=i,Ye.setup(pe.current,ze,nt,{editorMode:k,isMobile:W,allowNudging:N,forceSquare:t,resetState:n,canEditMasks:l,canEditVisibility:s}),_e(JSON.stringify(ze)),Ce(!0)}(),tt}),[Qe,O,We,Je,B,Ae,Me,pe.current,Ze,ue,de]);var $e=q?0:32,et=X?Ye.scrollToLayer(O,{height:window.innerHeight-e.toolsetHeight-44-$e,width:window.innerWidth}):null;function tt(){window.removeEventListener("resize",ot),window.addEventListener("beforeunload",R.c,{capture:!0})}function nt(){Ye.onSelectLayer(ct),Ye.onUpdateLayer(lt),Ye.onDeleteLayer(st),Ye.onDraggedLayer(dt),Ye.onDoubleClickLayer(ut),Ye.onAnimationStart(it),Ye.onAnimationComplete(at),Ye.onTrack(fe),Ye.onCopyStyles(rt),window.addEventListener("resize",ot),ot(),ne({mediaLoaded:!0}),Pe(!0),oe(!0),window.hasFontIssue&&P.a.getClient().notify(new Error("Text is not rendering correctly"))}function rt(e,t){u(e,t)}function it(){ge("started")}function at(){ge("complete");try{var e,t=(null===qe||void 0===qe||null===(e=qe.currentScene)||void 0===e?void 0:e.parent).id.includes(E.s)?E.s:E.R;qe.activeCardScenario=t,te(t),_.handleScrollAnimation({isActive:!0})}catch(n){console.warn(n)}}function ot(){var e,t=(null===(e=pe.current)||void 0===e?void 0:e.parentElement)||{offsetHeight:0,offsetWidth:0},n=t.offsetHeight,r=t.offsetWidth;r&&n&&(Xe.emit(o.Graphics.RESIZE,r,n),D||(Xe.once(o.Graphics.DATA_UPDATED,(function(){D=!0,ne({mediaLoaded:!0})})),Xe.once(o.Graphics.RENDERED,(function(){ne({mediaLoaded:!0})}))))}function ct(e,t){_.selectLayerHandler(a,e,t)}function lt(e,t){_.updateLayerHandler(e,t)}function st(e){L.includes(document.activeElement.nodeName)||_.deleteLayerHandler(e)}function ut(e){W&&"text"===e.type&&"envelopeFrontBaseText"!==e.id&&ie(E.Mb)}function dt(e,t){_.draggedLayerHandler(e)}function ft(e){_.fileChangeHandler(e,a,pt)}function pt(e){Fe(!0),Fe(!0),Ne(e)}function ht(){Fe(!1),Ne("")}function bt(e){e.preventDefault(),_.mediaBackgroundHandler(c)}function gt(){Oe(!1),Ee(!0)}function vt(e){e.stopPropagation(),_.handleScrollAnimation({isActive:!1}),_.flipScenario()}function mt(e){e.stopPropagation(),_.handleScrollAnimation({isActive:!1}),Ye.graphics.selection.currentState!==E.X&&(Ye.graphics.selection.currentState=null,Ye.changeStageState(E.X))}function Ot(e){return Object(T.b)(m.j,{cta:Object(R.a)(x),isUploadYourOwn:e,onClick:function(e){e.stopPropagation()},children:Object(T.b)(p.a,{onChange:ft})})}function yt(){var e,t,r,i,a,o,c,l=(null===(e=qe.currentScene)||void 0===e||null===(t=e.parent)||void 0===t||null===(r=t.children)||void 0===r?void 0:r.length)>1;if(X||"complete"!==be)return null;var s=null===qe||void 0===qe||null===(i=qe.currentState)||void 0===i?void 0:i.toLowerCase().includes(E.R),u=null===(a=pe.current)||void 0===a?void 0:a.querySelector(s?"#envelope":"#card"),d=se&&"card"===(null===(o=qe.currentScene)||void 0===o||null===(c=o.parent)||void 0===c?void 0:c.name),f=u?function(e,t){var r=pe.current.getBoundingClientRect(),i=e.getBoundingClientRect(),a=i.left-r.left;return"mobile"===n?84:t?i.right/2:a}(u,d):0,p=d?"8px":"auto";return Object(T.c)(m.e,{left:f,top:p,children:[l&&Object(T.b)(S.b,{dataTest:"media-flip",desktopPadding:"8px",mobilePadding:"4px",onClick:vt,place:"top",tooltipText:"Flip",children:Object(T.b)(h.FlipCanvasIcon,{})}),!k&&z&&Object(T.b)(S.b,{desktopPadding:"8px",mobilePadding:"4px",onClick:mt,place:"top",tooltipText:"Replay",children:Object(T.b)(h.PlayIcon,{})})]})}function jt(){return Object(T.c)(T.a,{children:[w&&Object(T.b)(y.a,{graphicsManager:Ye}),Object(T.b)(m.f,{className:"backdrop-transition",ref:pe}),!k||He?null:W&&B&&me?Object(T.b)(b.a,{handleRemoveAnimation:gt}):H?W?Q?null:V?Object(T.c)(m.i,{children:[Ot(),Object(T.b)(m.d,{children:"or"}),Object(T.c)(m.a,{onClick:bt,children:[Object(T.b)(h.Photo28Icon,{}),Object(T.b)(m.b,{children:"Select background"})]})]}):Object(T.b)(m.i,{children:Ot(!0)}):Object(T.b)(m.c,{cta:Object(R.a)(x),children:Object(T.b)(p.a,{id:"desktop_file_input",onChange:ft})}):void 0,Ue?Object(T.b)(v.a,{confirmText:"Close",onClose:ht,onConfirm:ht,title:Be}):null,yt()]})}return Object(r.useEffect)((function(){pe.current.parentElement.style.transform=X?"translate(0, ".concat(et,"px)"):null}),[X,et]),W||!k||z?jt():Object(T.b)(d.a,{handleFileChange:ft,children:jt()})})))}.call(this,n("jm2j")(e))}}]);